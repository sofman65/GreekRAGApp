# ================================
# Configuration for ΠΥΘΙΑ RAG System
# ================================

corpus:
  input_dir: "corpus"
  file_types:
    - ".pdf"
    - ".md"

splitter:
  chunk_size: 1600
  chunk_overlap: 250
  separators:
    - "\n## "
    - "\n# "
    - "\nΆρθρο"
    - "\nΚεφάλαιο"
    - "\n"
    - " "

embeddings:
  provider: "ollama"
  model: "all-minilm:l6-v2"
  batch_size: 16

vector_db:
  backend: "weaviate"
  top_k: 6
  weaviate:
    url: "http://localhost:8080"
    class_name: "GreekMilitaryDocs"
    text_key: "text"

# -----------------------------------------------------
# RERANKER — NOW GPU-OPTIMIZED (TURN IT ON WHEN READY)
# -----------------------------------------------------
reranker:
  enabled: true   # set to true once everything is stable
  provider: "sentence-transformers"
  model: "jinaai/jina-reranker-v2-base-multilingual"
  top_k: 3
  device: "cuda"          # <-- correct spelling, GPU acceleration
  trust_remote_code: true

# -----------------------------------------------------
# MAIN LLM (RAG MODE)
# Best models you have:
# - gpt-oss:20b for accuracy
# - llama3.1:8b-instruct-q4_K_M if you want speed
# -----------------------------------------------------
llm:
  provider: "ollama"
  model: "gpt-oss:20b"          # strongest model you have
  temperature: 0.00
  max_tokens: 512
  system_prompt: |
    Είσαι η Πυθία, ένας αυστηρός και απόλυτα ακριβής στρατιωτικός RAG βοηθός.
    - Αν η απάντηση ΔΕΝ βρίσκεται στα παρεχόμενα αποσπάσματα:
      "Δεν εντοπίζεται σχετική πληροφορία στα έγγραφα του Ερμή."
    - Δεν επιτρέπεται να εικάζεις ή να προσθέτεις εξωτερική γνώση.
    - Απάντησε αποκλειστικά στα ελληνικά και μόνο βάσει των εγγράφων.

# -----------------------------------------------------
# CHAT LLM (NON-RAG MODE)
# -----------------------------------------------------
chat_llm:
  provider: "ollama"
  model: "mistral-nemo"
  temperature: 0.2

# -----------------------------------------------------
# ROUTER — decides RAG vs CHAT vs BLOCK
# -----------------------------------------------------
router:
  enabled: true
  min_score: 0.45

  llm:
    provider: "ollama"
    model: "mistral-nemo"
    temperature: 0.0

  rules:
    - pattern: "τι είναι*"
      route: "rag"
    - pattern: "*κανονισμ*"
      route: "rag"
    - pattern: "*άρθρο*"
      route: "rag"
    - pattern: "*προεδρικό διάταγμα*"
      route: "rag"
    - pattern: "*διαδικασία*"
      route: "rag"
    - pattern: "*πώς να*"
      route: "chat"
    - pattern: "*συμβουλή*"
      route: "chat"
    - pattern: "γεια*"
      route: "chat"
